<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="stylesheet" href="../third-party/bootstrap/bootstrap.min.css">

    <title>Hello, world!</title>
</head>
<body>
<h1>Writing a response script</h1>
The response script can control which response should be returned for a specific request.
You can use any valid javascript for this purpose. The script must provide the name of the response you want to return.
For example the simplest script would be:
<pre>
    "myResponse"
</pre>
to return the response with the name <code>myResponse</code> for every incoming request. A more interesting script could be
something like this:
<pre>
    if (someCondition) {
        "myMainResponse"
    } else {
        "myAlternativeResponse"
    }
</pre>
You have access to the request in the script to build up more complex logic.

<h1>Access the request</h1>
<p>
You can access the incoming request with the <code>_request</code> object. The <code>_request</code> object is a json
object in the form:
</p>
<pre>
{
    "host": "http://localhost:7777/",
    "path": "myPath",
    "method": "POST",
    "queryParameter": {
        "param1": "hello",
        "param2": "world"
    },
    "headers": {
        "host": "localhost:7777",
        "user-agent": "Mozilla/5.0",
        ...
    },
    "entity": "POST entity goes here"
}
</pre>

<h1>Print to stdout</h1>
You can print to the console (stdout) with the <code>print(obj)</code> funciton.

<h1>Example</h1>
<pre>
// Print the incoming request to stdout
print (JSON.stringify(_request))

// Read the query parameter with the name "q"
var queryParam = _request.queryParameter["q"]

// Decide which response to use
if (queryParam == "useMainResponse") {
    // Tell the engine to use response with name "first"
    "first"
} else {
    // Tell the engine to use response with name "second"
    "second"
}
</pre>

</body>
</html>


